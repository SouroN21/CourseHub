{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import axios from'axios';import API_CONFIG from'../config/apiConfig';import{toast,ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{var _location$state;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const navigate=useNavigate();const location=useLocation();const successMessage=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.message;useEffect(()=>{if(successMessage){toast.success(successMessage);}},[successMessage]);const handleSubmit=async e=>{e.preventDefault();try{const res=await axios.post(\"\".concat(API_CONFIG.BASE_URL,\"/auth/login\"),{email,password});localStorage.setItem('token',res.data.token);toast.success('Login successful! Redirecting...');setTimeout(()=>{const role=res.data.user.role;if(role==='Admin'){navigate('/admin/dashboard');}else{navigate('/');}},1500);}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed. Please try again.');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\",autoClose:3000,theme:\"colored\",pauseOnHover:true,draggable:true}),/*#__PURE__*/_jsx(\"section\",{className:\"min-h-screen bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 flex items-center justify-center px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl max-w-md w-full p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-indigo-900 text-3xl font-extrabold mb-6 text-center\",children:\"Login to EduVerse\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-indigo-900 font-semibold mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",required:true,value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\",placeholder:\"your.email@example.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-indigo-900 font-semibold mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",required:true,value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\",placeholder:\"Enter your password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-yellow-400 text-indigo-900 font-bold py-2 rounded-lg hover:bg-yellow-500 transition focus:outline-none focus:ring-4 focus:ring-yellow-300\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-6 text-indigo-900 text-center\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"font-semibold hover:text-yellow-400 transition\",children:\"Sign up\"})]})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","axios","API_CONFIG","toast","ToastContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_location$state","email","setEmail","password","setPassword","navigate","location","successMessage","state","message","success","handleSubmit","e","preventDefault","res","post","concat","BASE_URL","localStorage","setItem","data","token","setTimeout","role","user","error","_error$response","_error$response$data","response","children","position","autoClose","theme","pauseOnHover","draggable","className","onSubmit","htmlFor","id","type","required","value","onChange","target","placeholder","to"],"sources":["D:/INTERN/CourseHub/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport API_CONFIG from '../config/apiConfig';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const successMessage = location.state?.message;\r\n\r\n  useEffect(() => {\r\n    if (successMessage) {\r\n      toast.success(successMessage);\r\n    }\r\n  }, [successMessage]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await axios.post(`${API_CONFIG.BASE_URL}/auth/login`, {\r\n        email,\r\n        password,\r\n      });\r\n\r\n      localStorage.setItem('token', res.data.token);\r\n\r\n      toast.success('Login successful! Redirecting...');\r\n\r\n      setTimeout(() => {\r\n        const role = res.data.user.role;\r\n        if (role === 'Admin') {\r\n          navigate('/admin/dashboard');\r\n        } else {\r\n          navigate('/');\r\n        }\r\n      }, 1500);\r\n    } catch (error) {\r\n      toast.error(error.response?.data?.message || 'Login failed. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={3000}\r\n        theme=\"colored\"\r\n        pauseOnHover\r\n        draggable\r\n      />\r\n      <section className=\"min-h-screen bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 flex items-center justify-center px-4\">\r\n        <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-8\">\r\n          <h2 className=\"text-indigo-900 text-3xl font-extrabold mb-6 text-center\">\r\n            Login to EduVerse\r\n          </h2>\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-indigo-900 font-semibold mb-1\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\"\r\n                placeholder=\"your.email@example.com\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-indigo-900 font-semibold mb-1\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-indigo-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400 transition\"\r\n                placeholder=\"Enter your password\"\r\n              />\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full bg-yellow-400 text-indigo-900 font-bold py-2 rounded-lg hover:bg-yellow-500 transition focus:outline-none focus:ring-4 focus:ring-yellow-300\"\r\n            >\r\n              Login\r\n            </button>\r\n          </form>\r\n          <p className=\"mt-6 text-indigo-900 text-center\">\r\n            Don't have an account?{' '}\r\n            <Link\r\n              to=\"/signup\"\r\n              className=\"font-semibold hover:text-yellow-400 transition\"\r\n            >\r\n              Sign up\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}